![CI](https://github.com/caponetto/vscode-quarkus-djl/workflows/CI/badge.svg)
![CodeQL](https://github.com/caponetto/vscode-quarkus-djl/workflows/CodeQL/badge.svg)
[![GitHub Stars](https://img.shields.io/github/stars/caponetto/vscode-quarkus-djl.svg)](https://github.com/caponetto/vscode-quarkus-djl/stargazers)
[![License](https://img.shields.io/github/license/caponetto/vscode-quarkus-djl.svg)](https://github.com/caponetto/vscode-quarkus-djl/blob/main/LICENSE)

# Editor services on VS Code with Quarkus and DJL

<p align="center">
  <a href="documentation/demos/classify.gif"><img src="documentation/demos/classify.gif" width="250"></a>
  <a href="documentation/demos/detect.gif"><img src="documentation/demos/detect.gif" width="250"></a>
  <a href="documentation/demos/sentiment.gif"><img src="documentation/demos/sentiment.gif" width="250"></a>
</p>

Putting together [VS Code extension](https://code.visualstudio.com/api), [Quarkus](https://quarkus.io/), and [Deep Java Library](https://djl.ai/) into a simple project. Just for fun. :P

## Modules

1. `vscode-extension`: Activate the VS Code extension when an image or text file is opened by initializing the Quarkus app (with support of the backend library from [Kogito Tooling](https://github.com/kiegroup/kogito-tooling)).

1. `app-server`: Quarkus application that exposes REST endpoints for editor services, such as image classification, object detection, and sentiment analysis.

**Note**: The Quarkus application is automatically started up and stopped when the VS Code extension is activated and deactivated, respectively. Also, the build process takes care of embedding the Quarkus application into the VS Code extension.

## Requirements

- [Maven](https://maven.apache.org/) 3.6.2 or later
- [Java](https://openjdk.java.net/install/) 11 or later
- [Node](https://nodejs.org/) LTS
- [Yarn](https://yarnpkg.com/)

## Running the example

- Open this example in VS Code 1.43+
- In the terminal, execute `yarn run init && yarn run build:fast`
- `F5` to start debugging

Then:
1. Open an image file (`*.png`, `*.jpg`, or `*.jpeg`) and click on the `Classify` <img src="documentation/images/buttons/output.png"> or `Detect Objects` <img src="documentation/images/buttons/jersey.png"> button.
1. Open a text file (`*.txt`) and click on the `Sentiment Analysis` <img src="documentation/images/buttons/heart.png"> button.

VS Code will send a POST request to the embedded Quarkus app, which will perform the required operation on the image/text and report back the result.

**Important**: Running for the first time will require a longer time to complete each operation since the models need to be downloaded and cached into your machine.

## Generating the vsix file

Run `yarn run init && yarn run build:prod` if you want to generate the `vsix` file.

Once the build process is done, the `vsix` file will be at `packages/vscode-extension/dist`.

The `vsix` file is also generated by the GitHub workflow and uploaded as an artifact.
